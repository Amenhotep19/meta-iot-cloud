From 6e95b4574915eb0981a2b6329d3986e5625c111a Mon Sep 17 00:00:00 2001
From: Scott Ware <scott.r.ware@intel.com>
Date: Thu, 5 Jan 2017 15:55:13 +0000
Subject: [PATCH 3/3] Compile as C99

---
 device/iothub_client_python/CMakeLists.txt | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

diff --git a/device/iothub_client_python/CMakeLists.txt b/device/iothub_client_python/CMakeLists.txt
index 6a231da..b7e9737 100644
--- a/device/iothub_client_python/CMakeLists.txt
+++ b/device/iothub_client_python/CMakeLists.txt
@@ -13,7 +13,15 @@ if(NOT ${use_http})
     message(FATAL_ERROR "iothub_client_python needs http support")
 endif()
 
-compileAsC99()
+if (CMAKE_VERSION VERSION_LESS "3.1")
+  if (CMAKE_C_COMPILER_ID STREQUAL "GNU")
+    set (CMAKE_C_FLAGS "--std=c99 ${CMAKE_C_FLAGS}")
+    set (CMAKE_CXX_FLAGS "--std=c++11 ${CMAKE_CXX_FLAGS}")
+  endif()
+else()
+  set (CMAKE_C_STANDARD 99)
+  set (CMAKE_CXX_STANDARD 11)
+endif()
 
 # get boost
 set(Boost_USE_MULTITHREADED      ON)
-- 
1.9.1

